{
    "exportFormatVersion": 2,
    "exportTime": "2022-11-17 05:31:17",
    "containerVersion": {
        "path": "accounts/6003042416/containers/39219437/versions/558",
        "accountId": "6003042416",
        "containerId": "39219437",
        "containerVersionId": "558",
        "container": {
            "path": "accounts/6003042416/containers/39219437",
            "accountId": "6003042416",
            "containerId": "39219437",
            "name": "schneider-electric3-pilot.csod.com",
            "publicId": "GTM-PD5R2XM",
            "usageContext": [
                "WEB"
            ],
            "fingerprint": "1611734361114",
            "tagManagerUrl": "https://tagmanager.google.com/#/container/accounts/6003042416/containers/39219437/workspaces?apiLink=container",
            "features": {
                "supportUserPermissions": true,
                "supportEnvironments": true,
                "supportWorkspaces": true,
                "supportGtagConfigs": false,
                "supportBuiltInVariables": true,
                "supportClients": false,
                "supportFolders": true,
                "supportTags": true,
                "supportTemplates": true,
                "supportTriggers": true,
                "supportVariables": true,
                "supportVersions": true,
                "supportZones": true
            },
            "tagIds": [
                "GTM-PD5R2XM"
            ]
        },
        "tag": [
            {
                "accountId": "6003042416",
                "containerId": "39219437",
                "tagId": "27",
                "name": "Ecom-IltEventPage",
                "type": "html",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "html",
                        "value": "<script src=\"https://polyfill.io/v3/polyfill.min.js?features=Array.from,Promise,Symbol,Object.setPrototypeOf,Object.getOwnPropertySymbols,Set,Math.trunc,BigInt,Map,Reflect,WeakMap,WeakRef,WeakSet,BigInt,Map,Reflect,WeakMap,WeakRef,WeakSet\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/superagent\"></script>\n<!-- if you wish to use unpkg.com instead: -->\n<!-- <script src=\"https://unpkg.com/superagent\"></script> -->\n<style>\n.ecommodal {\n  display: none; \n  position: fixed; \n  z-index: 1; \n  padding-top: 100px; \n  left: 0;\n  top: 0;\n  width: 100%; \n  height: 100%; \n  overflow: auto; \n  background-color: rgb(0,0,0); \n  background-color: rgba(0,0,0,0.4); \n}\n.ecommodal-content {\n  position: relative;\n  background-color: #fefefe;\n  margin: auto;\n  padding: 0;\n  border: 1px solid #888;\n  width: 80%;\n  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\n  -webkit-animation-name: animatetop;\n  -webkit-animation-duration: 0.4s;\n  animation-name: animatetop;\n  animation-duration: 0.4s\n}\n@-webkit-keyframes animatetop {\n  from {top:-300px; opacity:0} \n  to {top:0; opacity:1}\n}\n@keyframes animatetop {\n  from {top:-300px; opacity:0}\n  to {top:0; opacity:1}\n}\n.ecomclose {\n  color: white;\n  float: right;\n  font-size: 28px;\n  font-weight: bold;\n}\n.ecomclose:hover,\n.ecomclose:focus {\n  color: #000;\n  text-decoration: none;\n  cursor: pointer;\n}\n.ecommodal-header {\n  padding: 2px 16px;\n  background-color: grey;\n  color: white;\n}\n.ecommodal-body {padding: 2px 16px;}\n\n</style>\n\n<meta http-equiv=\"Pragma\" content=\"no-cache\" />\n<meta http-equiv=\"Expires\" content=\"-1\" />\n\n<div id=\"ecommyModal\" class=\"ecommodal\">\n  <div class=\"ecommodal-content\">\n    <div class=\"ecommodal-header\">\n      <span class=\"ecomclose\" onclick=\"ecomCloseAlert();\">&times;</span>\n      <h4 style=\"color:white\" id=\"ecomAlertHeader\"></h4>\n    </div>\n    <div id=\"ecomAlertText\" class=\"ecommodal-body\"></div>\n  </div>\n</div>\n\n<script>\nvar ecom_UserId = null;\nvar ecom_loDetails = null;\nvar ecom_MiddleWareApiUrl = 'https://svgq3ogkhk.execute-api.eu-west-1.amazonaws.com/prod';\n//var ecom_MiddleWareApiUrl = 'https://svgq3ogkhk.execute-api.eu-west-1.amazonaws.com/prod';//Given by Schneider\nvar ecom_origin = window.location.origin.toString();\n\nvar ecom_ExUrl = \"https://exchange.se.com/api/navigation-service/auth?authorized=true&target=https%3A%2F%2Fexchange.se.com%2Fshop%2Fproducts-services%2Forder%2F\";\nvar ecom_ExRedirectUrl = \"?redirectBack=https://schneider-electric.csod.com/ui/lms-learner-home/home?tab_page_id=-200300006\";\nvar ecom_eventObjectId = null;\nvar curMutation = null;\nvar ecom_config = { attributes: true, childList: true, characterData: true, subtree: true};\nvar ecom_container = document.body;\nvar ecom_TrainingAction = null;\nvar ecom_RequestSession = null;\nvar ecom_TrainingDetails = null;\nvar ecomError = null;\nvar ecom_RegisterAddItemToNewCart = null;\nvar ecom_Counter = 0;\nvar ecom_ReqCounter = 0;\nvar ecom_iniCounter = 0;\nvar ecom_RequestStr = [\"request\", \"ask\", \"demander\", \"fragen\", \"anfrage\", \"anfordern\", \"solicitud\", \"solicitar\", \"запрос\", \"申込\", \"申请\", \"richiedi\", \"zapisz się\",\n\"aanvragen\", \"الطلب\", \"בקש הדרכה\", \"신청\", \"požadavek\", \"anmod\", \"mohon\", \"հարցում\", \"zatraži\", \"pyyntö\", \"αίτημα έναρξης\", \"jelentkezés\",\n\"permintaan\", \"solicitare\", \"begäran\", \"ร้องขอ\", \"talep\", \"запит\", \"yêu cầu\"];\n\n\n\n\nfunction ecomShowAlert(header, text){\n\ttry{\n\t\tvar modal = document.getElementById(\"ecommyModal\");\n\t\tdocument.getElementById(\"ecomAlertHeader\").innerHTML = header;\n\t\tdocument.getElementById(\"ecomAlertText\").innerHTML = \"<p> </p><p>\" + text + \"</p><p> </p>\";\n\t\tmodal.style.display = \"block\";\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomCloseAlert(){\n\ttry{\n\t\tvar modal = document.getElementById(\"ecommyModal\");\n\t\tmodal.style.display = \"none\";\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomShowLoading(){\n\ttry{\n\t\tvar span = document.createElement(\"span\");\n\t\tspan.setAttribute(\"aria-hidden\", \"true\");\n\t\tspan.setAttribute(\"data-testid\", \"$rcl-preloader__spinner\");\n\t\tspan.setAttribute(\"class\", \"sc-gJWqzi iTDCOR\");\n\t\tspan.setAttribute(\"style\", \"width: 64px; height: 64px;\");\n\n\t\tvar div = document.createElement(\"div\");\n\t\tdiv.appendChild(span);\n\n\t\tvar div1 = document.createElement(\"div\");\n\t\tdiv1.setAttribute(\"class\", \"sc-CtfFt fzpRPc\");\n\t\tdiv1.appendChild(div);\n\n\t\tvar div2 = document.createElement(\"div\");\n\t\tdiv2.appendChild(div1);\n\t\tdiv2.setAttribute(\"data-testid\", \"$rcl-preloader__scrim\");\n\t\tdiv2.setAttribute(\"class\", \"sc-bMvGRv inCzUN\");\n\n\t\tdocument.querySelectorAll(\"[role='status']\")[0].appendChild(div2);\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomHideLoading(){\t\n\ttry{\n\t\tdocument.querySelectorAll(\"[role='status']\")[0].innerHTML = \"\";\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomGetMonthNumber(month){\n\ttry{\n\t\treturn \"JanFebMarAprMayJunJulAugSepOctNovDec\".indexOf(month) / 3\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomHandOverToCsod(loid){\n\ttry{\n\t\tdocument.querySelectorAll(\"[loid='\"+ loid +\"']\")[0].removeAttribute(\"onclick\");\n\t\tdocument.querySelectorAll(\"[loid='\"+ loid +\"']\")[0].click();\n\t\tif(document.querySelectorAll(\"[data-test='LD_Upcoming_Session_Row_Secondary_Action']\").length > 0){\n\t\t\tdocument.querySelectorAll(\"[data-test='LD_Upcoming_Session_Row_Secondary_Action']\")[0].click();\n\t\t}\n\t\tdocument.querySelectorAll(\"[loid='\"+ loid +\"']\")[0].setAttribute(\"onclick\",\"ecomSetMenuItem('\" + loid + \"');\");\n\t\tecomHideLoading();\n\t}catch(e){\n\t\tecomHideLoading();\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomRequestSession(loid, cartId){\n\ttry{\n\t  superagent\n\t\t\t\t.post(ecom_origin + '/Services/api/LMS/Training/' + loid + '/Actions/2/User/' + ecom_UserId)\n\t\t.send({\"actionId\":2,\"trainingId\":loid,\"viewSource\":2})\n\t\t\t\t.set('accept', 'application/json; q=1.0, text/*; q=0.8, */*; q=0.1')\n\t  .set('authorization', 'Bearer ' + csod.context.token)\n\t\t\t\t.end(function (err, res) {\n\t\t\t\t\tif (!err && res) {\n\t\t\t\t\t\tecom_RequestSession = res.body;\n\t\t\t\t\t\tif(ecom_RequestSession.data[0].succeeded.toString().toLowerCase() == \"true\"){\n\t\t\t\t\t\t\tvar url = ecom_ExUrl + cartId;// + ecom_ExRedirectUrl;\n\t\t\t\t\t\t\tconsole.log(url);\n\t\t\t\t\t\t\twindow.location.href = url;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tecomHandOverToCsod(loid);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\tecomError = err;\n\t\t\t\t\t\tvar text = \"Error Occured\";\n\t\t\t\t\t\tif(err.rawResponse){\n\t\t\t\t\t\t\ttext = err.rawResponse;\n\t\t\t\t\t\t}else if(err.response){\n\t\t\t\t\t\t\ttext = \"Error: \" + err.response.statusCode + \" - \" + err.response.text;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttext = err.status;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(\"Error: \" + text);\n\t\t\t\t\t\tecomShowAlert(\"Error\", text);\n\t\t\t\t\t}\n\t\t\t\t});\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n  \nfunction ecomGetChildSession(uiDate, uiLocation){\n\ttry{\n\t\tfor(var i=0;i<ecom_TrainingDetails.data[0].sessions.length;i++){\n\t\t\ttry{\n\t\t\t\tvar dataDate = new Date(ecom_TrainingDetails.data[0].sessions[i].startDate.toString());\n\t\t\t\tif(((uiDate - dataDate) === 0) && uiLocation.trim() == ecom_TrainingDetails.data[0].sessions[i].locationString.toString()){\n\t\t\t\t\treturn ecom_TrainingDetails.data[0].sessions[i];\n\t\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\tconsole.log(e);\n\t\t\t\tecomShowAlert(\"Error\", e);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomValidate(){\n\tif(ecom_loDetails.SkuId == \"null\" || ecom_loDetails.SkuId == \"\"){\n\t\tconsole.log(\"No Sku Id present for this ILT Event\");\n\t\tecomShowAlert(\"Lo Data Missing\", \"No SkuId present for this ILT Event\");\n\t\treturn false;\n\t}\n\tif(ecom_loDetails.OfferCode == \"null\" || ecom_loDetails.OfferCode == \"\"){\n\t\tconsole.log(\"No Offer Code present for this ILT Event\");\n\t\tecomShowAlert(\"Lo Data Missing\", \"No Offer Code present for this ILT Event\");\n\t\treturn true;\n\t}\n\tif(ecom_loDetails.ApplicationProductID == \"null\" || ecom_loDetails.ApplicationProductID == \"\"){\n\t\tconsole.log(\"No Application Product ID present for this Online Course\");\n\t\tecomShowAlert(\"Lo Data Missing\", \"No Application Product ID present for this ILT Event\");\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction ecomRegisterAddItemToNewCart(LOID){\n\ttry{\n\t\tif(ecomValidate()){\n\t\t\treturn false;\n\t\t}\n \n\t\tvar button = document.querySelectorAll(\"[loid='\"+ LOID+ \"']\")[0];\n\t\tvar eventName = document.getElementById(\"clamped-content-LD_Call_To_Action_Title\").innerText;\n\t\tvar eventLocation = button.getAttribute(\"location\");\n\t\tvar dateTime = button.getAttribute(\"eventDate\");\n\t\tecomShowLoading();\n\t\tsuperagent\n\t\t\t.get(ecom_MiddleWareApiUrl + '/registeradditemtonewcart')\n\t\t\t.query(\"UserId=\" + ecom_UserId)\n\t\t\t.query(\"EventId=\" + ecom_eventObjectId)\n\t\t\t.query(\"LOID=\" + LOID)\n\t\t\t.query(\"Event=\" + eventName)\n\t\t\t.query(\"Loc=\" + eventLocation)\n\t\t\t.query(\"Date=\" + dateTime)\n\t\t\t.set('X-API-Key', 'xxxxxxxxxxxxxxxxxxxxxxxxx')\n\t\t\t.set('accept', 'json')\n\t\t\t.end(function (err, res) {\n\t\t\t\tif (!err && res) {\n\t\t\t\t\tecom_RegisterAddItemToNewCart = res;\n\t\t\t\t\tif(res.statusCode == 200){\n\t\t\t\t\t\tecom_RegisterAddItemToNewCart = res.body;\n\t\t\t\t\t\tecomRequestSession(LOID, ecom_RegisterAddItemToNewCart.CartId);\n\t\t\t\t\t}else if(res.statusCode == 406){\n\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\tconsole.log(\"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\tconsole.log(res);\t\t\t\t\t\n\t\t\t\t\t\tecomShowAlert(\"LO Data Missing\", res.body);\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\tecomShowAlert(\"Error: \", res);\n\t\t\t\t\t\tconsole.log(\"Error: \" + res);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tecomError = err;\n\t\t\t\t\tif(ecomError.status == 406){\n\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\tconsole.log(\"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\tconsole.log(ecomError);\t\t\t\t\t\n\t\t\t\t\t\tecomShowAlert(\"LO Data Missing\", ecomError.message);\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\tvar text = \"Error Occured\";\n\t\t\t\t\t\tif(err.rawResponse){\n\t\t\t\t\t\t\ttext = err.rawResponse;\n\t\t\t\t\t\t}else if(ecomError.response){\n\t\t\t\t\t\t\ttext = \"Error: \" + ecomError.response.statusCode + \" - \" + ecomError.response.text;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttext = ecomError.status;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(\"Error: \" + text);\n\t\t\t\t\t\tecomShowAlert(\"Error\", text);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}catch(e){\n\t\tecomHideLoading();\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomSetMenuItem(loid){\n\ttry{\n\t\tvar liElem = null;\n\t\tvar liElems = document.querySelectorAll(\"[data-test='LD_Upcoming_Session_Row_Secondary_Action']\");\n\t\tif(liElems.length > 0){\n\t\t\tfor(var i = 0; i < liElems.length; i++){\n\t\t\t\tvar requestStr = liElems[i].innerText.trim().toLowerCase().trim();\n\t\t\t\tif(ecom_RequestStr.includes(requestStr) && liElems[i].style.display != \"none\"){\n\t\t\t\t\tliElem = liElems[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tecom_Counter = 0;\n\t\t\tif(liElem){\n\t\t\t\tliElem.style.display = \"none\";\n\t\t\t\tvar menuElement = liElem.parentElement;\t\t\t\t\t\n\t\t\t\tvar newLi = document.createElement(\"li\");\n\t\t\t\tnewLi.setAttribute(\"id\", \"myLi\");\n\t\t\t\tnewLi.innerText = \"Buy\";\n\t\t\t\tfor(var x=0; x<=liElem.classList.length;x++){\n\t\t\t\t\tnewLi.classList.add(liElem.classList[x]);\n\t\t\t\t}\n\t\t\t\tnewLi.setAttribute(\"onclick\",\"ecomRegisterAddItemToNewCart('\" + loid + \"');\");\n\t\t\t\tmenuElement.insertBefore(newLi, liElem);\n\t\t\t}\n\t\t}else{\n\t\t\tif (ecom_Counter <= 50) {\n\t\t\t\tecom_Counter++;\n\t\t\t\tsetTimeout(function () { ecomSetMenuItem(loid); }, 200);\n\t\t\t}\n\t\t}\t\t\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomRemoveRequestButton(){\n\ttry{\n\t\tvar flyOutDiv = document.getElementById(\"sessionFlyout\");\n\t\tif(flyOutDiv.querySelectorAll(\"[data-test='LD_Flyout_Footer_Duplexed_Btn']\")[0]){\n\t\t\tvar requestStr = flyOutDiv.querySelectorAll(\"[data-test='LD_Flyout_Footer_Duplexed_Btn']\")[0].innerText.toString().toLowerCase().trim();\n\t\t\tif(ecom_RequestStr.includes(requestStr)){\n\t\t\t\tflyOutDiv.querySelectorAll(\"[data-test='LD_Flyout_Footer_Duplexed_Btn']\")[0].style.display = \"none\";\n\t\t\t}\n\t\t\tvar priceText = \"€\" + (ecom_loDetails.EuroCost.trim() == \"\" ? \"0.00\" : ecom_loDetails.EuroCost) + \"/$\" + (ecom_loDetails.DollarCost.trim() == \"\" ? \"0.00\" : ecom_loDetails.DollarCost);\n\t\t\tif(flyOutDiv.querySelectorAll(\"[data-test='LD_Session_Flyout_Price']\") && flyOutDiv.querySelectorAll(\"[data-test='LD_Session_Flyout_Price']\")[0] && flyOutDiv.querySelectorAll(\"[data-test='LD_Session_Flyout_Price']\")[0].children[0]){\n\t\t\t\tflyOutDiv.querySelectorAll(\"[data-test='LD_Session_Flyout_Price']\")[0].children[0].innerHTML = priceText;\n\t\t\t}else{\n\t\t\t\tvar span = document.createElement(\"span\");\n\t\t\t\tspan.innerText = priceText;\n\t\t\t\tvar para = document.createElement(\"p\");\n\t\t\t\tpara.setAttribute(\"color\", \"grey70\");\n\t\t\t\tpara.setAttribute(\"font-style\", \"normal\");\n\t\t\t\tpara.setAttribute(\"font-weight\", \"normal\");\n\t\t\t\tpara.setAttribute(\"data-test\", \"LD_Session_Flyout_Price\");\n\t\t\t\tpara.setAttribute(\"class\", \"sc-fhYwyz zfGNq sc-eMigcr sc-fOICqy jIdisl sc-dznXNo jebwSr\");\n\t\t\t\tpara.appendChild(span);\n\t\t\t\tif(flyOutDiv.querySelectorAll(\"[data-test='LD_Flyout_Footer_Duplexed_Btn']\")[0]){\n\t\t\t\t\tvar elem = flyOutDiv.querySelectorAll(\"[data-test='LD_Flyout_Footer_Duplexed_Btn']\")[0];\n\t\t\t\t\telem.parentElement.insertBefore(para, elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif (ecom_Counter <= 50) {\n\t\t\t\tecom_ReqCounter++;\n\t\t\t\tsetTimeout(function () { ecomRemoveRequestButton(); }, 200);\n\t\t\t}\n\t\t}\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomAddButtons(){\n\ttry{\n\t\tvar priceText = \"€\" + (ecom_loDetails.EuroCost.trim() == \"\" ? \"0.00\" : ecom_loDetails.EuroCost) + \"/$\" + (ecom_loDetails.DollarCost.trim() == \"\" ? \"0.00\" : ecom_loDetails.DollarCost);\n\t\tvar sessionArea = document.getElementById(\"upcoming-session-section-id\");\n\t\tif(sessionArea && sessionArea.children[2] && sessionArea.children[2].children[0] && sessionArea.children[2].children[0].children){\n\t\t\tsessionArea = sessionArea.children[2].children[0].children;\n\t\t\tif(document.querySelectorAll(\"[data-test='LD_Call_To_Action_price']\")[0]){\n\t\t\t\tvar span = document.querySelectorAll(\"[data-test='LD_Call_To_Action_price']\")[0].children[0];\n\t\t\t\tspan.innerText = priceText;\n\t\t\t}else{\n\t\t\t\tvar span = document.createElement(\"span\");\n\t\t\t\tspan.innerText = priceText;\n\t\t\t\tvar para = document.createElement(\"p\");\n\t\t\t\tpara.setAttribute(\"color\", \"grey60\");\n\t\t\t\tpara.setAttribute(\"font-style\", \"normal\");\n\t\t\t\tpara.setAttribute(\"font-weight\", \"normal\");\n\t\t\t\tpara.setAttribute(\"data-test\", \"LD_Call_To_Action_price\");\n\t\t\t\tpara.setAttribute(\"class\", \"sc-fhYwyz kxCJRZ sc-eMigcr sc-fOICqy jIdisl sc-hdPSEv cdwQcV\");\n\t\t\t\tpara.appendChild(span);\n\t\t\t\tvar buttonEle = document.querySelectorAll(\"[data-test='LD_Call_To_Action_Duplexed_Btn']\")[0];\n\t\t\t\tbuttonEle.parentElement.insertBefore(para, buttonEle);\n\t\t\t}\n\t\t\t\n\t\t\tfor(var i = 0; i < sessionArea.length; i++){\n\t\t\t\ttry{\n\t\t\t\t\tif(sessionArea[i].children[1] && sessionArea[i].children[1].children[0] && sessionArea[i].children[1].children[0].children[1] && sessionArea[i].children[1].children[0].children[1].children[0]){\n\t\t\t\t\t\tvar eventDate = sessionArea[i].children[1].children[0].children[1].children[0].innerText.trim();\n\t\t\t\t\t\t//var strDates = eventDate.trim().split('-');\n\t\t\t\t\t\t//var uiDate = new Date(strDates[0].trim());\n\t\t\t\t\t\tvar uiLocation = sessionArea[i].children[1].children[0].children[2].innerText;\n\t\t\t\t\t\tvar session = ecom_TrainingDetails.data[0].sessions[i]; //ecomGetChildSession(uiDate, uiLocation);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(session != null){\n\t\t\t\t\t\t\tvar loid = session.loId.toString();\n\t\t\t\t\t\t\tvar buttonsArea = sessionArea[i].children[1].children[1];\n\n\t\t\t\t\t\t\tif(sessionArea[i].children[1].children[1].children[0].querySelectorAll(\"[data-test='LD_Upcoming_Session_Row_Price']\")[0]){\n\t\t\t\t\t\t\t\tvar span = sessionArea[i].children[1].children[1].children[0].querySelectorAll(\"[data-test='LD_Upcoming_Session_Row_Price']\")[0].children[0];\n\t\t\t\t\t\t\t\tspan.innerText = priceText;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tvar span = document.createElement(\"span\");\n\t\t\t\t\t\t\t\tspan.innerText = priceText;\n\t\t\t\t\t\t\t\tvar para = document.createElement(\"p\");\n\t\t\t\t\t\t\t\tpara.setAttribute(\"color\", \"grey60\");\n\t\t\t\t\t\t\t\tpara.setAttribute(\"font-style\", \"normal\");\n\t\t\t\t\t\t\t\tpara.setAttribute(\"font-weight\", \"normal\");\n\t\t\t\t\t\t\t\tpara.setAttribute(\"data-test\", \"LD_Upcoming_Session_Row_Price\");\n\t\t\t\t\t\t\t\tpara.setAttribute(\"class\", \"sc-fhYwyz bzQLsB sc-eMigcr sc-fOICqy jIdisl sc-fgfRvd cRmCQP\");\n\t\t\t\t\t\t\t\tpara.appendChild(span);\n\t\t\t\t\t\t\t\tsessionArea[i].children[1].children[1].insertBefore(para, sessionArea[i].children[1].children[1].children[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(buttonsArea.querySelectorAll(\"[data-testid='rcl$duplexedButton__primaryButton']\")[0]){\n\t\t\t\t\t\t\t\tbuttonsArea.querySelectorAll(\"[data-testid='rcl$duplexedButton__primaryButton']\")[0].setAttribute(\"onclick\",\"ecomRemoveRequestButton();\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(buttonsArea.getElementsByTagName(\"svg\")[0].parentElement){\n\t\t\t\t\t\t\t\tbuttonsArea.getElementsByTagName(\"svg\")[0].parentElement.setAttribute(\"loid\", loid);\n\t\t\t\t\t\t\t\tbuttonsArea.getElementsByTagName(\"svg\")[0].parentElement.setAttribute(\"eventDate\", eventDate);\n\t\t\t\t\t\t\t\tbuttonsArea.getElementsByTagName(\"svg\")[0].parentElement.setAttribute(\"location\", uiLocation);\n\t\t\t\t\t\t\t\tbuttonsArea.getElementsByTagName(\"svg\")[0].parentElement.setAttribute(\"onclick\",\"ecomSetMenuItem('\" + loid + \"');\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tecomHideLoading();\n\t}catch(e){\n\t\tconsole.log(e);\n\t\tecomHideLoading();\n\t}\n}\n\nfunction ecomTrainingDetails(){\n\ttry{\n\t\tsuperagent\n\t\t\t\t.get(ecom_origin + '/services/api/lms/training/' + ecom_eventObjectId + '/details')\n\t\t\t\t.set('accept', 'application/json; q=1.0, text/*; q=0.8, */*; q=0.1')\n\t\t\t\t.set('authorization', 'Bearer ' + csod.context.token)\n\t\t\t\t.end(function (err, res) {\n\t\t\t\t\tif (!err && res) {\n\t\t\t\t\t\tecom_TrainingDetails = res.body;\n\t\t\t\t\t\tecomAddButtons();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tecomError = err;\n\t\t\t\t\t\tvar text = \"Error Occured\";\n\t\t\t\t\t\tif(err.rawResponse){\n\t\t\t\t\t\t\ttext = err.rawResponse;\n\t\t\t\t\t\t}else if(err.response){\n\t\t\t\t\t\t\ttext = \"Error: \" + err.response.statusCode + \" - \" + err.response.text;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttext = err.status;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(\"Error: \" + text);\n\t\t\t\t\t\tecomShowAlert(\"Error\", text);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\treturn false;\n\t}catch(e){\n\t\tconsole.log(e);\n\t\tecomHideLoading();\n\t}\n}\n\nfunction ecomHideRequest(target){\n\ttry{\n\t\tvar liElems = target.getElementsByTagName(\"li\");\n\t\tfor (var i = 0; i < liElems.length; i++) {\n\t\t\tvar requestStr = liElems[i].innerText.toLowerCase().trim();\n\t\t\tif(ecom_RequestStr.includes(requestStr)){\n\t\t\t\tliElems[i].style.display = \"none\";\n\t\t\t}\n\t\t}\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n  \nvar ecom_domobserver = new MutationObserver(function(mutations) {\n\tmutations.forEach(function(mutation) {\n\t\tvar requestStr = mutation.target.innerText.toLowerCase().trim();\n\t\tif(ecom_RequestStr.includes(requestStr)){\n\t\t\tcurMutation = mutation;\n            ecomHideRequest(mutation.target);\n\t\t}\n    });\n});\n\nfunction eCom_Initialize() {\n\ttry{\n\t\tif (document.getElementById(\"upcoming-session-section-id\")) {\n\t\t\tecomShowLoading();\n\t\t\tvar replaceQueryStr = window.location.search.toString();\n\t\t\tecom_eventObjectId = window.location.href.toString();\n\t\t\tif(replaceQueryStr.trim() != \"\"){\n\t\t\t\tecom_eventObjectId = ecom_eventObjectId.replace(replaceQueryStr, \"\");\n\t\t\t}\n\t\t\tecom_eventObjectId = ecom_eventObjectId.substring(ecom_eventObjectId.lastIndexOf('/') + 1);\n\t\t\tecom_UserId = localStorage.getItem(\"loggedInUser\");\n\t\t\tif(ecom_UserId == null){\n\t\t\t\tecom_UserId = csod.context.user;\n\t\t\t}\n\t\t\t(function() {\n\t\t\t\tsuperagent\n\t\t\t\t.get(ecom_MiddleWareApiUrl + '/getlodetails')\t\t\t\t\n\t\t\t\t.query(\"loId=\" + ecom_eventObjectId)\n\t\t\t\t.query(\"UserId=\" + ecom_UserId)\n\t\t\t\t.query(\"r=\" + Math.random())\n\t\t\t\t.set('X-API-Key', 'xxxxxxxxxxxxxxxxxxxxxxxxx')\n\t\t\t\t.set('accept', 'json')\t\t\t\t\n\t\t\t\t.end(function (err, res) {\n\t\t\t\t\tif (!err && res) {\n\t\t\t\t\t\tecom_loDetails = res;\n\t\t\t\t\t\tif(res.statusCode == 200){\n\t\t\t\t\t\t\tecom_loDetails = res.body;\n\t\t\t\t\t\t\tif(ecom_loDetails == null || ecom_loDetails == \"null\"){\n\t\t\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(ecom_loDetails.IsECommerce && ecom_loDetails.IsECommerce.toLowerCase() == \"yes\"){\n\t\t\t\t\t\t\t\tecom_domobserver.observe(ecom_container, ecom_config);\n\t\t\t\t\t\t\t\tecomTrainingDetails();\n\t\t\t\t\t\t\t\tif(replaceQueryStr.trim() != \"\"){\n\t\t\t\t\t\t\t\t\tecomRemoveRequestButton();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else if(res.statusCode == 406){\n\t\t\t\t\t\t\tecomShowAlert(\"Error\", \"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\t\tconsole.log(\"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tecomShowAlert(\"Error: \", res);\n\t\t\t\t\t\t\tconsole.log(\"Error: \" + res);\n\t\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tecomError = err;\n\t\t\t\t\t\tif(ecomError.status == 406){\n\t\t\t\t\t\t\tconsole.log(\"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\t\tconsole.log(\"Error: \" + ecomError.message);\n\t\t\t\t\t\t\tecomShowAlert(\"Error\", \"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\t\tconsole.log(\"Error: \" + ecomError.rawResponse);\n\t\t\t\t\t\t\tecomShowAlert(\"Error\", ecomError.rawResponse);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})();\n\t\t\t\n\t\t} else {\n\t\t\tif (ecom_iniCounter <= 20) {\n\t\t\t\t\tecom_iniCounter++;\n\t\t\t\t\tsetTimeout(function () { eCom_Initialize(); }, 1000);\n\t\t\t\t}\n\t\t}\n\t}catch(e){\n\t\tecomHideLoading();\n\tconsole.log(e);\n\t}\n}\n\nif(performance.navigation.type == 2){\n\twindow.location.reload(true);\n}\n\neCom_Initialize();\n</script>"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "supportDocumentWrite",
                        "value": "false"
                    }
                ],
                "fingerprint": "1668078319715",
                "firingTriggerId": [
                    "26",
                    "30"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6003042416",
                "containerId": "39219437",
                "tagId": "29",
                "name": "Ecom-OnlineCourse",
                "type": "html",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "html",
                        "value": "<script src=\"https://polyfill.io/v3/polyfill.min.js?features=Array.from,Promise,Symbol,Object.setPrototypeOf,Object.getOwnPropertySymbols,Set,Math.trunc,BigInt,Map,Reflect,WeakMap,WeakRef,WeakSet,BigInt,Map,Reflect,WeakMap,WeakRef,WeakSet\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/superagent\"></script>\n<!-- if you wish to use unpkg.com instead: -->\n<!-- <script src=\"https://unpkg.com/superagent\"></script> -->\n\n<style>\n.ecommodal {\n  display: none; \n  position: fixed; \n  z-index: 1; \n  padding-top: 100px; \n  left: 0;\n  top: 0;\n  width: 100%; \n  height: 100%; \n  overflow: auto; \n  background-color: rgb(0,0,0); \n  background-color: rgba(0,0,0,0.4); \n}\n.ecommodal-content {\n  position: relative;\n  background-color: #fefefe;\n  margin: auto;\n  padding: 0;\n  border: 1px solid #888;\n  width: 80%;\n  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\n  -webkit-animation-name: animatetop;\n  -webkit-animation-duration: 0.4s;\n  animation-name: animatetop;\n  animation-duration: 0.4s\n}\n@-webkit-keyframes animatetop {\n  from {top:-300px; opacity:0} \n  to {top:0; opacity:1}\n}\n@keyframes animatetop {\n  from {top:-300px; opacity:0}\n  to {top:0; opacity:1}\n}\n.ecomclose {\n  color: white;\n  float: right;\n  font-size: 28px;\n  font-weight: bold;\n}\n.ecomclose:hover,\n.ecomclose:focus {\n  color: #000;\n  text-decoration: none;\n  cursor: pointer;\n}\n.ecommodal-header {\n  padding: 2px 16px;\n  background-color: grey;\n  color: white;\n}\n.ecommodal-body {padding: 2px 16px;}\n\n</style>\n\n<div id=\"ecommyModal\" class=\"ecommodal\">\n  <div class=\"ecommodal-content\">\n    <div class=\"ecommodal-header\">\n      <span class=\"ecomclose\" onclick=\"ecomCloseAlert();\">&times;</span>\n      <h4 style=\"color:white\" id=\"ecomAlertHeader\"></h4>\n    </div>\n    <div id=\"ecomAlertText\" class=\"ecommodal-body\"></div>\n  </div>\n</div>\n\n<script>\nvar ecom_UserId;\nvar ecom_loDetails;\nvar ecom_MiddleWareApiUrl = 'https://svgq3ogkhk.execute-api.eu-west-1.amazonaws.com/prod';\n//var ecom_MiddleWareApiUrl = 'https://svgq3ogkhk.execute-api.eu-west-1.amazonaws.com/prod';//Given by Schneider\nvar ecom_origin = window.location.origin.toString();\n\nvar ecom_ExUrl = \"https://exchange.se.com/api/navigation-service/auth?authorized=true&target=https%3A%2F%2Fexchange.se.com%2Fshop%2Fproducts-services%2Forder%2F\";\nvar ecom_ExRedirectUrl = \"?redirectBack=https://schneider-electric.csod.com/ui/lms-learner-home/home?tab_page_id=-200300006\";\nvar ecom_eventObjectId;\nvar ecom_iniCounter = 0;\nvar resp, error;\nvar ecom_RequestSession;\nvar ecom_TrainingDetails;\nvar ecomError;\nvar ecom_RegisterAddItemToNewCart;\n\nfunction ecomShowAlert(header, text){\n\ttry{\n\t\tvar modal = document.getElementById(\"ecommyModal\");\n\t\tdocument.getElementById(\"ecomAlertHeader\").innerHTML = header;\n\t\tdocument.getElementById(\"ecomAlertText\").innerHTML = \"<p> </p><p>\" + text + \"</p><p> </p>\";\n\t\tmodal.style.display = \"block\";\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomCloseAlert(){\n\ttry{\n\t\tvar modal = document.getElementById(\"ecommyModal\");\n\t\tmodal.style.display = \"none\";\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomShowLoading(){\n\ttry{\n\t\tvar span = document.createElement(\"span\");\n\t\tspan.setAttribute(\"aria-hidden\", \"true\");\n\t\tspan.setAttribute(\"data-testid\", \"$rcl-preloader__spinner\");\n\t\tspan.setAttribute(\"class\", \"sc-gJWqzi iTDCOR\");\n\t\tspan.setAttribute(\"style\", \"width: 64px; height: 64px;\");\n\n\t\tvar div = document.createElement(\"div\");\n\t\tdiv.appendChild(span);\n\n\t\tvar div1 = document.createElement(\"div\");\n\t\tdiv1.setAttribute(\"class\", \"sc-CtfFt fzpRPc\");\n\t\tdiv1.appendChild(div);\n\n\t\tvar div2 = document.createElement(\"div\");\n\t\tdiv2.appendChild(div1);\n\t\tdiv2.setAttribute(\"data-testid\", \"$rcl-preloader__scrim\");\n\t\tdiv2.setAttribute(\"class\", \"sc-bMvGRv inCzUN\");\n\n\t\tdocument.querySelectorAll(\"[role='status']\")[0].appendChild(div2);\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomHideLoading(){\t\n\ttry{\n\t\tdocument.querySelectorAll(\"[role='status']\")[0].innerHTML = \"\";\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomHandOverToCsod(loid){\n\ttry{\n\t\tvar div = document.querySelectorAll(\"[data-test='LD_Call_To_Action_Duplexed_Btn']\")[0];\n\t\tvar sysbutton = div.getElementsByTagName(\"button\")[0];\n\t\tsysbutton.click();\n\t\tecomHideLoading();\n\t}catch(e){\n\t\tecomHideLoading();\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomRequestSession(loid, cartId){\ntry{\t\t\n\t  superagent\n\t\t\t\t.post(ecom_origin + '/Services/api/LMS/Training/' + loid + '/Actions/2/User/' + ecom_UserId)\n\t\t.send({\"actionId\":2,\"trainingId\":loid,\"viewSource\":2})\n\t\t\t\t.set('accept', 'application/json; q=1.0, text/*; q=0.8, */*; q=0.1')\n\t  .set('authorization', 'Bearer ' + csod.context.token)\n\t\t\t.end(function (err, res) {\n\t\t\t\tif (!err && res) {\n\t\t\t\t\tecom_RequestSession = res.body;\n\t\t\t\t\tif(ecom_RequestSession.data[0].succeeded.toString().toLowerCase() == \"true\"){\n\t\t\t\t\t\tvar url = ecom_ExUrl + cartId;// + ecom_ExRedirectUrl;\n\t\t\t\t\t\tconsole.log(url);\n\t\t\t\t\t\twindow.location.href = url;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tecomHandOverToCsod(loid);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tecomHideLoading();\n\t\t\t\t\tecomError = err;\n\t\t\t\t\tvar text = \"Error Occured\";\n\t\t\t\t\tif(err.rawResponse){\n\t\t\t\t\t\ttext = err.rawResponse;\n\t\t\t\t\t}else if(err.response){\n\t\t\t\t\t\ttext = \"Error: \" + err.response.statusCode + \" - \" + err.response.text;\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttext = err.status;\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log(\"Error: \" + text);\n\t\t\t\t\tecomShowAlert(\"Error\", text);\n\t\t\t\t}\n\t\t\t});\n\t}catch(e){\n\t\tecomHideLoading();\n\t\tconsole.log(e);\t\t\n\t}\n}\n\nfunction ecomGetChildSession(uiDate, uiLocation){\n\ttry{\n\t\tfor(var i=0;i<ecom_TrainingDetails.data[0].sessions.length;i++){\n\t\t\ttry{\n\t\t\tvar dataDate = new Date(ecom_TrainingDetails.data[0].sessions[i].startDate.toString())\n\t\t\tif(uiDate.getFullYear() == dataDate.getFullYear() && \n\t\t\tuiDate.getMonth() == dataDate.getMonth() && \n\t\t\tuiDate.getDate() == dataDate.getDate() &&\n\t\t\tuiDate.getHours() == (dataDate.getHours()  % 12 || 12) &&\n\t\t\tuiDate.getMinutes() == dataDate.getMinutes() && \n\t\t\tuiLocation.trim() == ecom_TrainingDetails.data[0].sessions[i].locationString.toString())\n\t\t\t{\n\t\t\t\treturn ecom_TrainingDetails.data[0].sessions[i];\n\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\tconsole.log(e);\n\t\t\t\tecomShowAlert(\"Error\", e);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n\nfunction ecomValidate(){\n\tif(ecom_loDetails.SkuId == \"null\" || ecom_loDetails.SkuId == \"\"){\n\t\tconsole.log(\"No Sku Id present for this Online Course\");\n\t\tecomShowAlert(\"Lo Data Missing\", \"No SkuId present for this Online Course\");\n\t\treturn true;\n\t}\n\tif(ecom_loDetails.OfferCode == \"null\" || ecom_loDetails.OfferCode == \"\"){\n\t\tconsole.log(\"No Offer Code present for this Online Course\");\n\t\tecomShowAlert(\"Lo Data Missing\", \"No Offer Code present for this Online Course\");\n\t\treturn true;\n\t}\n\tif(ecom_loDetails.ApplicationProductID == \"null\" || ecom_loDetails.ApplicationProductID == \"\"){\n\t\tconsole.log(\"No Application Product ID present for this Online Course\");\n\t\tecomShowAlert(\"Lo Data Missing\", \"No Application Product ID present for this Online Course\");\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction ecomRegisterAddItemToNewCart(LOID){\n\ttry{\n\t\tif(ecomValidate()){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar eventName = document.getElementById(\"clamped-content-LD_Call_To_Action_Title\").innerText;\n\t\tecomShowLoading();\n\t\tsuperagent\n\t\t\t.get(ecom_MiddleWareApiUrl + '/registeraddonlinecourseitemtonewcart')\n\t\t\t.query(\"UserId=\" + ecom_UserId)\n\t\t\t.query(\"EventId=\" + ecom_eventObjectId)\n\t\t\t.query(\"Event=\" + eventName)\n\t\t\t.set('X-API-Key', 'xxxxxxxxxxxxxxxxxxxxxxxxx')\n\t\t\t.set('accept', 'json')\n\t\t\t.end(function (err, res) {\n\t\t\t\tif (!err && res) {\n\t\t\t\t\tecom_RegisterAddItemToNewCart = res;\n\t\t\t\t\tif(res.statusCode == 200){\n\t\t\t\t\t\tecom_RegisterAddItemToNewCart = res.body;\n\t\t\t\t\t\tecomRequestSession(LOID, ecom_RegisterAddItemToNewCart.CartId);\n\t\t\t\t\t}else if(res.statusCode == 406){\n\t\t\t\t\t\tconsole.log(\"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\tconsole.log(res);\t\t\t\t\t\n\t\t\t\t\t\tecomShowAlert(\"LO Data Missing\", res.body);\t\n\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tecomShowAlert(\"Error: \", res);\n\t\t\t\t\t\tconsole.log(\"Error: \" + res);\n\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tecomError = err;\n\t\t\t\t\tif(ecomError.status == 406){\n\t\t\t\t\t\tconsole.log(\"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\tconsole.log(ecomError);\t\t\t\t\t\n\t\t\t\t\t\tecomShowAlert(\"LO Data Missing\", ecomError.message);\t\n\t\t\t\t\t\tecomHideLoading();\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar text = \"Error Occured\";\n\t\t\t\t\t\tif(err.rawResponse){\n\t\t\t\t\t\t\ttext = err.rawResponse;\n\t\t\t\t\t\t}else if(err.response){\n\t\t\t\t\t\t\ttext = \"Error: \" + err.response.statusCode + \" - \" + err.response.text;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttext = err.status;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(\"Error: \" + text);\n\t\t\t\t\t\tecomShowAlert(\"Error\", text);\n\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}catch(e){\n\t\tconsole.log(e);\n\t\tecomHideLoading();\n\t}\n}\n\nfunction ecomChangeRequestToBuy(loid, ecom_loDetails){\n\ttry{\n\t\tvar div = document.querySelectorAll(\"[data-test='LD_Call_To_Action_Duplexed_Btn']\")[0];\n\t\tvar sysbutton = div.getElementsByTagName(\"button\")[0];\n\t\tif(sysbutton.innerText.trim().toLowerCase() == \"request\" || sysbutton.innerText.trim().toLowerCase() == \"request again\"){\n\t\t\tsysbutton.style.display = \"none\";\n\t\t\tvar priceP = document.createElement(\"p\");\n\t\t\tpriceP.style.fontWeight = \"normal\";\n\t\t\tpriceP.setAttribute(\"color\", \"grey60\");\n\t\t\tpriceP.setAttribute(\"font-style\", \"normal\");\n\t\t\tpriceP.setAttribute(\"class\", \"sc-fhYwyz kxCJRZ sc-eMigcr sc-fOICqy jIdisl sc-hdPSEv cdwQcV\");\n\t\t\tvar span = document.createElement(\"span\");\n\t\t\tspan.innerText = \"€\" + ecom_loDetails.EuroCost + \"/$\" + ecom_loDetails.DollarCost;\n\t\t\tpriceP.appendChild(span);\n\t\t\tdiv.appendChild(priceP);\n\t\t\tvar button = document.createElement(\"input\");\n\t\t\tbutton.setAttribute(\"type\", \"button\");\n\t\t\tbutton.setAttribute(\"id\", \"ecomButton\" + i);\n\t\t\tbutton.value = \"Buy\";\n\t\t\tfor(var x=0; x<=sysbutton.classList.length;x++){\n\t\t\t\tbutton.classList.add(sysbutton.classList[x]);\n\t\t\t}\n\t\t\tbutton.setAttribute(\"onclick\",\"ecomRegisterAddItemToNewCart('\" + loid + \"');\");\n\t\t\tif(div.children[0]){\n\t\t\t\tdiv.children[0].insertBefore(button, sysbutton);\n\t\t\t}else{\n\t\t\t\tdiv.appendChild(button);\n\t\t\t}\n\t\t}\n\t}catch(e){\n\t\tconsole.log(e);\n\t}\n}\n  \nfunction eCom_Initialize() {\n\ttry{\n\t\tif (document.querySelectorAll(\"[data-test='LD_Call_To_Action_Duplexed_Btn']\")[0]) {\n\t\t\tecomShowLoading();\n\t\t\tecom_eventObjectId = window.location.href;\n\t\t\tecom_eventObjectId = ecom_eventObjectId.substring(ecom_eventObjectId.lastIndexOf('/') + 1);\n\t\t\tecom_UserId = localStorage.getItem(\"loggedInUser\");\n\t\t\tif(ecom_UserId == null){\n\t\t\t\tecom_UserId = csod.context.user;\n\t\t\t}\n\t\t\t(function() {\n\t\t\t\tsuperagent\n\t\t\t\t.get(ecom_MiddleWareApiUrl + '/getlodetails')\n\t\t\t\t.query(\"loId=\" + ecom_eventObjectId)\n\t\t\t\t.query(\"UserId=\" + ecom_UserId)\n\t\t\t\t.set('X-API-Key', 'xxxxxxxxxxxxxxxxxxxxxxxxx')\n\t\t\t\t.set('accept', 'json')\n\t\t\t\t.end(function (err, res) {\n\t\t\t\t\tif (!err && res) {\n\t\t\t\t\t\tecom_loDetails = res;\n\t\t\t\t\t\tif(res.statusCode == 200){\n\t\t\t\t\t\t\tecom_loDetails = res.body;\n\t\t\t\t\t\t\tif(ecom_loDetails == null || ecom_loDetails == \"null\"){\n\t\t\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\t\t}else if(res.body.IsECommerce && res.body.IsECommerce.toLowerCase() == \"yes\"){\n\t\t\t\t\t\t\t\tecomChangeRequestToBuy(ecom_eventObjectId, ecom_loDetails);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tecomHideLoading();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else if(res.statusCode == 406){\n\t\t\t\t\t\t\tecomShowAlert(\"Error\", \"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\t\tconsole.log(\"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tecomShowAlert(\"Error: \", res);\n\t\t\t\t\t\t\tconsole.log(\"Error: \" + res);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tecomError = err;\n\t\t\t\t\t\tif(ecomError.status == 406){\n\t\t\t\t\t\t\tecomShowAlert(\"Error\", \"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\t\tconsole.log(\"NoContent for user: \" + ecom_UserId + \" and loid:\" + ecom_eventObjectId);\n\t\t\t\t\t\t\tconsole.loId(ecomError);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tecomError = err;\n\t\t\t\t\t\t\tvar text = \"Error Occured\";\n\t\t\t\t\t\t\tif(err.rawResponse){\n\t\t\t\t\t\t\t\ttext = err.rawResponse;\n\t\t\t\t\t\t\t}else if(err.response){\n\t\t\t\t\t\t\t\ttext = \"Error: \" + err.response.statusCode + \" - \" + err.response.text;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\ttext = err.status;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsole.log(\"Error: \" + text);\n\t\t\t\t\t\t\tecomShowAlert(\"Error\", text);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tecomHideLoading();\n\t\t\t\t});\n\t\t\t})();\n\t\t\t\n\t\t} else {\n\t\t\tif (ecom_iniCounter <= 20) {\n\t\t\t\t\tecom_iniCounter++;\n\t\t\t\t\tsetTimeout(function () { eCom_Initialize(); }, 1000);\n\t\t\t\t}\n\t\t}\n\t}catch(e){\n\t\tecomHideLoading();\n\tconsole.log(e);\n\t}\t\n}\n\neCom_Initialize();\n</script>\t"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "supportDocumentWrite",
                        "value": "false"
                    }
                ],
                "fingerprint": "1663178520347",
                "firingTriggerId": [
                    "28"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            }
        ],
        "trigger": [
            {
                "accountId": "6003042416",
                "containerId": "39219437",
                "triggerId": "26",
                "name": "Ecom-IltEventTrigger",
                "type": "PAGEVIEW",
                "filter": [
                    {
                        "type": "CONTAINS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Page URL}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "ui/lms-learning-details/app/event"
                            }
                        ]
                    }
                ],
                "fingerprint": "1646678446742"
            },
            {
                "accountId": "6003042416",
                "containerId": "39219437",
                "triggerId": "28",
                "name": "Ecom-OnlineCourseTrigger",
                "type": "DOM_READY",
                "filter": [
                    {
                        "type": "CONTAINS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Page URL}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "ui/lms-learning-details/app/course/"
                            }
                        ]
                    }
                ],
                "fingerprint": "1646666843649"
            },
            {
                "accountId": "6003042416",
                "containerId": "39219437",
                "triggerId": "30",
                "name": "Ecom-IltEventTrigger2",
                "type": "PAGEVIEW",
                "filter": [
                    {
                        "type": "CONTAINS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Page URL}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "ui/lms-learning-details/app/session/"
                            }
                        ]
                    }
                ],
                "fingerprint": "1646678562257"
            }
        ],
        "builtInVariable": [
            {
                "accountId": "6003042416",
                "containerId": "39219437",
                "type": "PAGE_URL",
                "name": "Page URL"
            }
        ],
        "fingerprint": "1668078333604",
        "tagManagerUrl": "https://tagmanager.google.com/#/versions/accounts/6003042416/containers/39219437/versions/558?apiLink=version"
    }
}